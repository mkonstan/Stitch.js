/*! Stitch.js v2.1.0 | MIT License | https://github.com/user/Stitch.js */
/*! STITCH_ASSEMBLY_METADATA {"generatedAt":"2026-02-26T02:29:00.498Z","source":"stitch.entry.js","mode":"reachable","availableModuleCount":23,"moduleCount":23,"modules":["packages/api/index.js","packages/api/src/observable.js","packages/api/src/reactive-factory.js","packages/browser/index.js","packages/browser/src/binding-runtime.js","packages/browser/src/binding-scan-helpers.js","packages/browser/src/data-binder.js","packages/browser/src/foreach-binding-orchestrator.js","packages/browser/src/foreach-rendering-delegates.js","packages/core/index.js","packages/core/src/batch-scheduler.js","packages/core/src/computed-ref.js","packages/core/src/message-bus.js","packages/core/src/reactive-system.js","packages/utils/index.js","packages/utils/src/attr-value-handlers.js","packages/utils/src/debug-config.js","packages/utils/src/foreach-reconcile-helpers.js","packages/utils/src/foreach-template-helpers.js","packages/utils/src/reactive-object-helpers.js","packages/utils/src/runtime-helpers.js","packages/utils/src/type-converters.js","packages/utils/src/value-binding-helpers.js"]} */
!function(e){var t=Object.create(null);t["packages/api/index.js"]=function(e,t,n){"use strict";const{createReactiveFactory:r}=n("packages/api/src/reactive-factory.js"),{Observable:s,computed:i}=n("packages/api/src/observable.js");e.exports={Observable:s,computed:i,version:"2.1.0",createReactiveFactory:r,ExtractedObservable:s,extractedComputed:i}},t["packages/api/src/observable.js"]=function(e,t,n){"use strict";const{createReactiveFactory:r}=n("packages/api/src/reactive-factory.js"),s=n("packages/utils/src/runtime-helpers.js"),i="v2.1.0",a=s.getProperty;class o{static create(e,t={}){if(!e||"object"!=typeof e)throw new Error("Observable.create() requires an object as input");const n=r(),s=n.reactive(e,new WeakSet);return Object.defineProperty(s,"_factory",{value:n,writable:!1,enumerable:!1,configurable:!1}),Object.defineProperty(s,"$on",{value:function(e,t){return n.reactiveSystem.messageBus.subscribe(e,t)},writable:!1,enumerable:!1,configurable:!1}),Object.defineProperty(s,"$watch",{value:function(e,t,r={}){let i=a(s,e);return n.reactiveSystem.effect(()=>{const n=a(s,e);n!==i&&(t(n,i,{key:e,newValue:n,oldValue:i,target:s}),i=n)},{batch:void 0!==r.batch&&r.batch})},writable:!1,enumerable:!1,configurable:!1}),Object.defineProperty(s,"$use",{value:function(e){return n.reactiveSystem.messageBus.use(e)},writable:!1,enumerable:!1,configurable:!1}),Object.defineProperty(s,"$off",{value:function(e,t){n.reactiveSystem.messageBus.unsubscribe(e,t)},writable:!1,enumerable:!1,configurable:!1}),Object.defineProperty(s,"$emit",{value:function(e,t){n.reactiveSystem.messageBus.publish(e,t)},writable:!1,enumerable:!1,configurable:!1}),Object.defineProperty(s,"$once",{value:function(e,t){const r=n.reactiveSystem.messageBus.subscribe(e,e=>{t(e),r()});return r},writable:!1,enumerable:!1,configurable:!1}),t.debug&&s.on(e=>{console.log(`[Stitch.js ${i} Debug] ${e.field}:`,e.oldValue,"->",e.newValue)}),s}static createArray(e=[]){if(!Array.isArray(e))throw new Error("Observable.createArray() requires an array as input");const t=r(),n=t.reactive([...e],new WeakSet);return Object.defineProperty(n,"_factory",{value:t,writable:!1,enumerable:!1,configurable:!1}),n}static reactive(e){const t=r(),n=t.reactive(e,new WeakSet);return Object.defineProperty(n,"_factory",{value:t,writable:!1,enumerable:!1,configurable:!1}),n}static computed(e){let t,n;if("function"==typeof e)t=e,n=null;else{if("object"!=typeof e||!e.get)throw new Error(`[Stitch.js ${i}] Stitch.computed() expects either:\n  - A function: Stitch.computed(function() { ... })\n  - An object: Stitch.computed({ get() { ... }, deps: [...] })`);if(t=e.get,n=e.deps||null,n&&!Array.isArray(n))throw new Error(`[Stitch.js ${i}] Stitch.computed() deps must be an array of property names.\nExample: Stitch.computed({ get() { ... }, deps: ['prop1', 'prop2'] })`)}return{__isStitchComputed:!0,fn:t,__explicitDeps:n}}static isReactive(e){return e&&"object"==typeof e&&!0===e.__isReactive}static toRaw(e){return o.isReactive(e)&&e.toJSON?e.toJSON():e}}e.exports={Observable:o,computed:function(e){return o.computed(e)}}},t["packages/api/src/reactive-factory.js"]=function(e,t,n){"use strict";const{ReactiveSystem:r}=n("packages/core/src/reactive-system.js"),{ComputedRef:s}=n("packages/core/src/computed-ref.js"),i=n("packages/utils/src/runtime-helpers.js"),a=n("packages/utils/src/reactive-object-helpers.js"),o={enabled:!1,categories:Object.create(null),log(){},group(){},groupEnd(){}};e.exports={createReactiveFactory:function(e={}){const t=e.version||"v2.1.0",n=e.debug||o,c=e.ReactiveSystem||r,l=e.ComputedRef||s,u=e.isArrowFunction||i.isArrowFunction,d=e.setProperty||i.setProperty,g=e.getProperty||i.getProperty,p=e.addChangeHandler||a.addChangeHandler,h=e.removeChangeHandler||a.removeChangeHandler,f=e.toJSON||a.toJSON;let b;const m=new WeakMap;function y(e,t,n){t&&null!=n&&!e._parent&&Object.defineProperty(e,"_parent",{value:{obj:t,key:n},writable:!1,enumerable:!1,configurable:!1})}function v(e){return e&&"object"==typeof e&&!e.__isReactive&&m.get(e)||e}function S(e,t,n,r){let s=e,i=t;for(;s._parent&&s._parent.obj;){const e=s._parent.obj,t=s._parent.key,a=`${t}.${i}`;(e._changeHandlers&&e._changeHandlers.size>0||b.messageBus.subscribers.has("*"))&&b.messageBus.publish("nested-change",{parent:e,parentKey:t,childKey:i,oldValue:n,newValue:r,fullPath:a}),s=e,i=a}}function E(e,r,s){return{enumerable:!0,configurable:!0,get:()=>(b.track(e,r),n.log("reactivity",`⬆️ GET: ${b._getObjectId(e)}.${String(r)}`,{value:s[r],hasEffect:!!b.currentEffect,effectId:b.currentEffect?.id}),s[r]),set(i){const a=s[r];if(a!==i){if(n.log("reactivity",`⬇️ SET: ${b._getObjectId(e)}.${String(r)}`,{oldValue:a,newValue:i}),"function"==typeof i&&u(i))throw new Error(`Stitch.js ${t}: Cannot set arrow function on property '${String(r)}'\n\nArrow functions cannot access reactive properties via 'this'.\nUse regular function or ES6 method shorthand instead.`);i=w(i,e,r),s[r]=i,b.trigger(e,r,a,i),S(e,r,a,i)}else n.log("reactivity",`SET SKIPPED (no change): ${b._getObjectId(e)}.${String(r)} = ${i}`)}}}function w(e,t,n){return null===e||"object"!=typeof e||e.__isReactive?e:Array.isArray(e)?j(e,t,n):_(e,new WeakSet,t,n)}function _(e,r=new WeakSet,s=null,i=null){if(null===e||"object"!=typeof e)return e;if(e.__isReactive)return e;const a=m.get(e);if(a)return y(e,s,i),a;if(r.has(e))return e;if(r.add(e),e instanceof Map)return function(e,t=null,n=null){const r=m.get(e);if(r)return y(e,t,n),r;e._changeHandlers||Object.defineProperty(e,"_changeHandlers",{value:new Set,writable:!1,enumerable:!1,configurable:!1}),y(e,t,n);const s=new Proxy(e,{get(e,t,n){if("__isReactive"===t)return!0;if("_changeHandlers"===t)return e._changeHandlers;if("_parent"===t)return e._parent;if("on"===t)return p.bind(e);if("off"===t)return h.bind(e);if("size"===t)return b.track(e,"size"),Reflect.get(e,t,e);const r=Reflect.get(e,t,n);return"function"==typeof r?"get"===t?function(t){return b.track(e,t),e.get(t)}:"has"===t?function(t){return b.track(e,t),e.has(t)}:"set"===t?function(t,n){const r=e.has(t),s=e.get(t);n&&"object"==typeof n&&!n.__isReactive&&(n=_(n,new WeakSet));const i=e.set(t,n);return r&&s===n||(b.trigger(e,t,s,n),b.trigger(e,"size",e.size,e.size),b.trigger(e,"iteration",null,null),S(e,t,s,n)),i}:"delete"===t?function(t){const n=e.has(t),r=e.get(t),s=e.delete(t);return n&&(b.trigger(e,t,r,void 0),b.trigger(e,"size",e.size+1,e.size),b.trigger(e,"iteration",null,null),S(e,t,r,void 0)),s}:"clear"===t?function(){const t=e.size;t>0&&(e.clear(),b.trigger(e,"size",t,0),b.trigger(e,"iteration",null,null),S(e,"clear",t,0))}:["forEach","keys","values","entries",Symbol.iterator].includes(t)?(b.track(e,"iteration"),r.bind(e)):r.bind(e):r}});return m.set(e,s),s}(e,s,i);if(e instanceof Set)return function(e,t=null,n=null){const r=m.get(e);if(r)return y(e,t,n),r;e._changeHandlers||Object.defineProperty(e,"_changeHandlers",{value:new Set,writable:!1,enumerable:!1,configurable:!1}),y(e,t,n);const s=new Proxy(e,{get(e,t,n){if("__isReactive"===t)return!0;if("_changeHandlers"===t)return e._changeHandlers;if("_parent"===t)return e._parent;if("on"===t)return p.bind(e);if("off"===t)return h.bind(e);if("size"===t)return b.track(e,"size"),Reflect.get(e,t,e);const r=Reflect.get(e,t,n);return"function"==typeof r?"has"===t?function(t){const n=v(t);return b.track(e,n),e.has(n)}:"add"===t?function(t){const n=t;t&&"object"==typeof t&&!t.__isReactive&&(t=_(t,new WeakSet));const r=v(t),s=e.has(r),i=e.add(r);return s||(b.trigger(e,r,void 0,r),b.trigger(e,"size",e.size-1,e.size),b.trigger(e,"iteration",null,null),S(e,"add",void 0,n)),i}:"delete"===t?function(t){const n=v(t),r=e.has(n),s=e.delete(n);return r&&(b.trigger(e,n,n,void 0),b.trigger(e,"size",e.size+1,e.size),b.trigger(e,"iteration",null,null),S(e,"delete",t,void 0)),s}:"clear"===t?function(){const t=e.size;t>0&&(e.clear(),b.trigger(e,"size",t,0),b.trigger(e,"iteration",null,null),S(e,"clear",t,0))}:["forEach","keys","values","entries",Symbol.iterator].includes(t)?(b.track(e,"iteration"),r.bind(e)):r.bind(e):r}});return m.set(e,s),s}(e,s,i);for(const[n,r]of Object.entries(e))if("function"==typeof r&&u(r))throw new Error(`Stitch.js ${t}: Arrow function detected in property '${n}'\n\nArrow functions cannot access reactive properties via 'this'.\nThey use lexical 'this' binding which cannot be changed.\n\nConvert to regular function or ES6 method shorthand:\n  ❌ ${n}: () => { return this.someValue; }\n  ✅ ${n}() { return this.someValue; }\n  ✅ ${n}: function() { return this.someValue; }\n\nLearn more: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions`);const o=new Map,c={};for(const[t,r]of Object.entries(e))r&&"object"==typeof r&&r.__isStitchComputed?(n.log("computed",`Found computed property at: ${t}`,{hasExplicitDeps:!!r.__explicitDeps}),o.set(t,r)):c[t]=r;for(const[t,n]of Object.entries(c))n&&"object"==typeof n&&!n.__isReactive&&(c[t]=w(n,e,t));for(const t in e)e.hasOwnProperty(t)&&delete e[t];return Object.assign(e,c),Array.isArray(e)?j(e,s,i):function(e,r=null,s=null,i=new Map){e._changeHandlers||Object.defineProperty(e,"_changeHandlers",{value:new Set,writable:!1,enumerable:!1,configurable:!1}),n.enabled&&!e.__stitchId&&Object.defineProperty(e,"__stitchId",{value:`obj_${Math.random().toString(36).substr(2,9)}`,writable:!1,enumerable:!1,configurable:!1}),y(e,r,s),Object.defineProperty(e,"__isReactive",{value:!0,writable:!1,enumerable:!1,configurable:!1});const a={},o={};return Object.keys(e).filter(e=>!i.has(e)).forEach(t=>{const n=e[t];t.startsWith("_")||"on"===t||"off"===t||(a[t]=n,o[t]=E(e,t,a))}),i.forEach((r,s)=>{n.log("computed",`Creating computed descriptor for: ${s}`,{hasExplicitDeps:!!r.__explicitDeps});const i=r.fn,a=r.__explicitDeps;let c=null;a&&(c=$(a,e),n.log("computed",`Resolved dependencies for "${s}":`,{declared:a,resolved:c})),o[s]=function(e,r,s,i=null){const a=new l(s,b,e,i);return i?n.log("computed",`COMPUTED DESCRIPTOR CREATED for ${String(r)} with explicit deps`,{deps:i}):n.log("computed",`COMPUTED DESCRIPTOR CREATED for ${String(r)}`),{enumerable:!0,configurable:!1,get:()=>a.get(),set(){throw new Error(`[Stitch.js ${t}] Cannot set computed property '${String(r)}'`)}}}(e,s,i,c)}),o.on={value:p.bind(e),writable:!1,enumerable:!1,configurable:!1},o.off={value:h.bind(e),writable:!1,enumerable:!1,configurable:!1},o.set={value:d.bind(null,e),writable:!1,enumerable:!1,configurable:!1},o.get={value:g.bind(null,e),writable:!1,enumerable:!1,configurable:!1},o.toJSON={value:f.bind(e),writable:!1,enumerable:!1,configurable:!1},o.$set={value:function(e,t){if(this.hasOwnProperty(e)&&Object.getOwnPropertyDescriptor(this,e).get)this[e]=t;else{const n=E(this,e,a);Object.defineProperty(this,e,n),this[e]=t}},writable:!1,enumerable:!1,configurable:!1},Object.defineProperties(e,o),e}(e,s,i,o)}function j(e,t=null,n=null){const r=m.get(e);if(r)return y(e,t,n),r;const s=["push","pop","shift","unshift","splice","sort","reverse","fill"];e._changeHandlers||Object.defineProperty(e,"_changeHandlers",{value:new Set,writable:!1,enumerable:!1,configurable:!1}),y(e,t,n);const i=new Proxy(e,{get(e,t,n){if("__isReactive"===t)return!0;if("_changeHandlers"===t)return e._changeHandlers;if("_parent"===t)return e._parent;if("on"===t)return p.bind(e);if("off"===t)return h.bind(e);if(b.track(e,t),s.includes(t))return function(...n){const r=b.depsMap.get(e),s=[];r&&r.forEach((e,t)=>{e&&e.size>0&&"symbol"!=typeof t&&!isNaN(t)&&s.push(t)});const i=s.length>0?e.slice():null,a=e.length,o=Array.prototype[t].apply(e,n);return b.trigger(e,"length",a,e.length),i&&s.forEach(t=>{const n=i[t],r=e[t];n!==r&&b.trigger(e,t,n,r)}),b.messageBus.publish("array-mutation",{target:e,method:t,args:n,oldLength:a,newLength:e.length}),o};const r=Reflect.get(e,t,n);if("symbol"!=typeof t&&!isNaN(t)&&r&&"object"==typeof r&&!r.__isReactive){const s=_(r,new WeakSet,n,t);return e[t]=s,s}return r},set(e,t,n,r){const s=e[t];n&&"object"==typeof n&&!n.__isReactive&&(n=_(n,new WeakSet,r,t));const i=Reflect.set(e,t,n,r);return s!==n&&(b.trigger(e,t,s,n),S(e,t,s,n)),i}});return m.set(e,i),i}function $(e,n,r=new Set){const s=new Set;for(const i of e){if(r.has(i)){console.warn(`[Stitch.js ${t}] Circular dependency detected: "${i}"\nDependency chain: ${Array.from(r).join(" → ")} → ${i}`);continue}r.add(i);const e=Object.getOwnPropertyDescriptor(n,i);if(e&&e.get&&n[i+"__explicitDeps"]){const e=$(n[i+"__explicitDeps"],n,new Set(r));for(const t of e)s.add(t)}else s.add(i);r.delete(i)}return Array.from(s)}return b=new c(S,{version:t,debug:n}),{reactiveSystem:b,reactive:_,createReactiveArray:j,computed:function(e){let n,r;if("function"==typeof e)n=e,r=null;else{if("object"!=typeof e||!e.get)throw new Error(`[Stitch.js ${t}] Stitch.computed() expects either:\n  - A function: Stitch.computed(function() { ... })\n  - An object: Stitch.computed({ get() { ... }, deps: [...] })`);if(n=e.get,r=e.deps||null,r&&!Array.isArray(r))throw new Error(`[Stitch.js ${t}] Stitch.computed() deps must be an array of property names.\nExample: Stitch.computed({ get() { ... }, deps: ['prop1', 'prop2'] })`)}return{__isStitchComputed:!0,fn:n,__explicitDeps:r}},resolveDependencies:$,bubbleChangeUp:S}}}},t["packages/browser/index.js"]=function(e,t,n){"use strict";const r="2.1.0",s=n("packages/browser/src/foreach-rendering-delegates.js"),i=n("packages/browser/src/foreach-binding-orchestrator.js"),a=n("packages/browser/src/binding-scan-helpers.js"),o=n("packages/browser/src/binding-runtime.js"),c=n("packages/browser/src/data-binder.js"),l=n("packages/utils/src/runtime-helpers.js"),u=n("packages/utils/src/debug-config.js"),d=n("packages/utils/src/attr-value-handlers.js"),g=n("packages/utils/src/value-binding-helpers.js"),p=n("packages/utils/src/type-converters.js"),h=n("packages/utils/src/foreach-template-helpers.js"),f=n("packages/utils/src/foreach-reconcile-helpers.js"),b={...u.createDebugState(`v${r}`),log(){},group(){},groupEnd(){}},m=p.createTypeConverters({version:r});function y(e,t){return p.getTypeConverter(e,t,m)}const v=g.createValueValidators({getTypeConverter:y,setProperty:l.setProperty,doc:"undefined"!=typeof document?document:null});function S(e){return g.getValueValidator(e,v)}const E=g.createValueHandlers({getTypeConverter:y,resolveValueValidator:S}),w=s.createRenderingDelegates({stitchDebug:b,getProperty:l.getProperty,getValueValidator:S,createItemContext:f.createItemContext,createTemplateElement:h.createTemplateElement,reconcileRows:f.reconcileRows,doc:"undefined"!=typeof document?document:null}).FOREACH_RENDERING_DELEGATES,_=o.createBindingRuntime({version:r,debug:b,getProperty:l.getProperty,setProperty:l.setProperty,getValueHandler:function(e){return g.getValueHandler(e,E)},getValueValidator:S,getTypeConverter:y,getAttrHandler:d.getAttrHandler,getRenderingDelegate:e=>s.getRenderingDelegate(e,w),propertyExists:l.propertyExists,findSimilarProperty:l.findSimilarProperty,resolveExternalForeachIntegration:function(){return{bindForeach:i.bindForeach,getRenderingDelegate:s.getRenderingDelegate,delegates:w}}}),j=c.createDataBinderClass({version:r,debug:b,getProperty:l.getProperty,getBindingHandler:_.getBindingHandler,scanCustomAttributes:_.scanCustomAttributes,bindingHandlers:_.BINDING_HANDLERS});e.exports={DataBinder:j,version:r,...s,...i,...a,...o,...c}},t["packages/browser/src/binding-runtime.js"]=function(e,t,n){"use strict";const r={enabled:!1,categories:Object.create(null),log(){},group(){},groupEnd(){}};e.exports={createBindingRuntime:function(t={}){const n=t.version||"v2.1.0",s=t.debug||r,i=t.getProperty,a=t.setProperty,o=t.getValueHandler,c=t.getValueValidator,l=(t.getTypeConverter,t.getAttrHandler),u=t.getRenderingDelegate,d=t.propertyExists,g=t.findSimilarProperty,p=t.resolveExternalForeachIntegration||function(){return null};function h(e,t,n,r){if(!s.enabled)return!0;if(!d(e,t)){const s=g(e,t),i=Object.keys(e).filter(e=>!e.startsWith("_")).slice(0,10);return console.warn(`[Stitch.js] ${n} binding failed: Property "${t}" not found\n`,{element:r.tagName,elementId:r.id||"(no id)",elementClasses:r.className||"(no classes)",expectedProperty:t,availableProperties:i,totalProperties:Object.keys(e).filter(e=>!e.startsWith("_")).length,suggestion:s}),!1}return!0}const f={text:{bind(e,t,r,s){h(t,r,"text",e);const a=s.reactiveSystem.effect(()=>{const s=i(t,r);"function"==typeof s&&console.warn(`[Stitch.js ${n}] Binding 'text' to a function: "${r}". Did you mean to call it or use a computed property?`),e.textContent=null!=s?s:""},{batch:!0});s.binder._trackCleanup(e,()=>s.reactiveSystem.cleanup(a))}},value:{bind(e,t,n,r){h(t,n,"value",e),s.log("bindings",`BINDING: value binding (two-way) for "${n}"`,{element:e.tagName,type:e.type});const l=o(e),u=r.reactiveSystem.effect(()=>{const r=i(t,n);s.log("bindings",`VALUE BINDING UPDATE (Model→View): "${n}" = ${r}`),l.modelToView(e,r,t,n)},{batch:!0});r.binder._trackCleanup(e,()=>r.reactiveSystem.cleanup(u));const d=()=>{const r=l.viewToModel(e);s.log("bindings",`VALUE BINDING UPDATE (View→Model): "${n}" = ${r}`);const i=c(e).validate(e,r,t,n,"user-input");a(t,n,i)};e.addEventListener("input",d),e.addEventListener("change",d),r.binder._trackCleanup(e,()=>{e.removeEventListener("input",d),e.removeEventListener("change",d)})}},visible:{bind(e,t,n,r){h(t,n,"visible",e);const s=r.reactiveSystem.effect(()=>{const r=i(t,n);e.style.display=r?"":"none"},{batch:!0});r.binder._trackCleanup(e,()=>r.reactiveSystem.cleanup(s))}},enabled:{bind(e,t,n,r){h(t,n,"enabled",e);const s=r.reactiveSystem.effect(()=>{const r=i(t,n);e.disabled=!r},{batch:!0});r.binder._trackCleanup(e,()=>r.reactiveSystem.cleanup(s))}},click:{bind(e,t,n,r){h(t,n,"click",e);const s=e=>{const r=i(t,n);if("function"==typeof r){const s=t&&t.$data?t.$data:t;n.startsWith("$parent.")&&void 0!==t.$data?r.call(t.$parent,s,e):r.call(s,e)}};e.addEventListener("click",s),r.binder._trackCleanup(e,()=>e.removeEventListener("click",s))}},event:{bind(e,t,r,a){h(t,r,"event",e),s.log("bindings",`EVENT BINDING: "${r}"`,{element:e.tagName});const o=[],c=()=>{o.forEach(({eventName:t,wrappedHandler:n})=>{e.removeEventListener(t,n)}),o.length=0},l=a.reactiveSystem.effect(()=>{c();const a=i(t,r);if(a&&"object"==typeof a)for(const[r,c]of Object.entries(a)){const a="string"==typeof c?i(t,c):c;if("function"==typeof a){s.log("bindings",`  Registering: ${r} → ${c}`,{event:r});const n=e=>a.call(t,e);e.addEventListener(r,n),o.push({eventName:r,wrappedHandler:n})}else console.warn(`[Stitch.js ${n}] event: binding handler not found: "${c}"`)}else console.error(`[Stitch.js ${n}] event: binding requires an object. Got: ${typeof a}`)},{batch:!0});a.binder._trackCleanup(e,()=>{c(),a.reactiveSystem.cleanup(l)})}},class:{bind(e,t,n,r){h(t,n,"class",e),s.log("bindings",`BINDING: class binding for "${n}"`,{element:e.tagName,initialClasses:Array.from(e.classList)});const a=r.reactiveSystem.effect(()=>{const r=i(t,n);s.log("bindings",`CLASS BINDING UPDATE: "${n}"`,{element:e.tagName,valueType:typeof r,value:r}),"string"==typeof r?(e.className=r,s.log("bindings",`  → Set className to: "${r}"`)):r&&"object"==typeof r&&(Object.keys(r).forEach(t=>{const n=!!r[t];e.classList.toggle(t,n),s.log("bindings",`  → Toggle "${t}": ${n}`)}),s.log("bindings",`  → Final classList: ${Array.from(e.classList).join(", ")}`))},{batch:!0});r.binder._trackCleanup(e,()=>r.reactiveSystem.cleanup(a))}},attr:{bind(e,t,r,s){h(t,r,"attr",e);const a=s.reactiveSystem.effect(()=>{const s=i(t,r);"object"==typeof s&&null!==s?Object.keys(s).forEach(t=>{const n=s[t];l(n).apply(e,t,n)}):console.warn(`[Stitch.js ${n}] attr: binding requires an object value. Example: attr: { href: url, target: "_blank" }`)},{batch:!0});s.binder._trackCleanup(e,()=>s.reactiveSystem.cleanup(a))}},foreach:{bind(e,t,n,r){const s=p();if(s&&"function"==typeof s.bindForeach)return s.bindForeach(e,t,n,r,{validateBinding:h,getProperty:i,getRenderingDelegate:s.getRenderingDelegate,foreachRenderingDelegates:s.delegates});h(t,n,"foreach",e);const a=r.binder._getTemplateSource(e),o=u(e),c=o.prepareConfig(e,a);e.innerHTML="";const l=r.reactiveSystem.effect(()=>{const s=i(t,n);o.render(e,s,c,r.binder,t,n)},{batch:!0});r.binder._trackCleanup(e,()=>r.reactiveSystem.cleanup(l))}},loading:{bind(e,t,n,r){h(t,n,"loading",e);const s=r.reactiveSystem.effect(()=>{const r=i(t,n);e.disabled=r,e.classList.toggle("loading",r),e.setAttribute("aria-busy",r?"true":"false")},{batch:!0});r.binder._trackCleanup(e,()=>r.reactiveSystem.cleanup(s))}}};let b=!1,m=null;function y(){if(b)return m;if(b=!0,void 0===e||!e.exports||"function"!=typeof require)return null;try{const e=require("./packages/browser/src/binding-scan-helpers");m=e&&"function"==typeof e.getBindingHandler&&"function"==typeof e.scanCustomAttributes?e:null}catch(e){m=null}return m}function v(e){const t=y();return t?t.getBindingHandler(e,f):f[e]||null}return{validateBinding:h,BINDING_HANDLERS:f,getBindingHandler:v,scanCustomAttributes:function(e){const t=y();if(t)return t.scanCustomAttributes(e,f);const n=[];for(const t of e.attributes)if(t.name.startsWith("data-")){const e=t.name.substring(5);v(e)&&n.push({type:e,path:t.value,attributeName:t.name})}return n},resolveExternalBindingScanIntegration:y}}}},t["packages/browser/src/binding-scan-helpers.js"]=function(e,t,n){"use strict";function r(e,t){return t[e]||null}function s(e,t){const n=[];for(const s of e.attributes)if(s.name.startsWith("data-")){const e=s.name.substring(5);r(e,t)&&n.push({type:e,path:s.value,attributeName:s.name})}return n}e.exports={getBindingHandler:r,scanCustomAttributes:s,createBindingScanner:function(e){return{getBindingHandler:t=>r(t,e),scanCustomAttributes:t=>s(t,e)}}}},t["packages/browser/src/data-binder.js"]=function(e,t,n){"use strict";const r={enabled:!1,categories:Object.create(null),log(){},group(){},groupEnd(){}};e.exports={createDataBinderClass:function(e={}){const t=e.version||"v2.1.0",n=e.debug||r,s=e.getProperty,i=e.getBindingHandler,a=e.scanCustomAttributes,o=e.bindingHandlers||Object.create(null);class c{constructor(e={}){this.boundElements=new Set,this.hooks=this.createHooks(e),this._elementCleanups=new Map,this._disposed=!1}bind(e,n){if("string"==typeof e&&(e=document.querySelector(e)),!e||!n)throw new Error("Invalid element or viewModel");if(!n._factory||!n._factory.reactiveSystem)throw new Error(`Stitch.js ${t}: viewModel must be created with Observable.create() to have a _factory property`);if(this.reactiveSystem=n._factory.reactiveSystem,"function"==typeof this.hooks.onChange){const r=r=>{try{this.hooks.onChange.call(this,r,n,e)}catch(e){console.warn(`[Stitch.js ${t}] DataBinder onChange hook error:`,e)}};n.on(r),this._trackCleanup(e,()=>n.off(r))}this._bindElement(e,n,[])}createHooks(e={}){return{onBind:e.onBind||null,onChange:e.onChange||null,properties:e.properties||{}}}_bindElement(e,t,n){this._processBindings(e,t,n),this._isBindingBoundary(e)||Array.from(e.children).forEach(e=>{this._bindElement(e,t,n)})}_isBindingBoundary(e){return!!e.hasAttribute("data-foreach")&&(n.log("bindings","Stopped at binding boundary: "+e.tagName),!0)}_processBindings(e,n,r){if(this.boundElements.has(e))return;const s=a(e);if(s.length>0&&(s.forEach(t=>{this._applyTypedBinding(e,n,t.type,t.path,r)}),this.boundElements.add(e),"function"==typeof this.hooks.onBind))try{this.hooks.onBind.call(this,e,n,s)}catch(e){console.warn(`[Stitch.js ${t}] DataBinder onBind hook error:`,e)}}_applyTypedBinding(e,r,a,o,c=[]){const l=c.length>0?`${c.join(".")}.${o}`:o;n.log("bindings",`_applyTypedBinding called: type="${a}", path="${o}", fullPath="${l}"`,{element:e.tagName});const u=o.split(".").pop(),d=this.hooks.properties[u]||this.hooks.properties[l]||this.hooks.properties[o],g=s(r,o);if(d&&d.onBind){n.log("bindings",`  → Using property hook onBind for "${l}"`,{propertyName:u,hasOnChange:!!d.onChange});const t={type:a,path:o,attributeName:`data-${a}`};d.onBind.call(this,e,g,t,l)}else{const n=i(a);if(n){const t={reactiveSystem:this.reactiveSystem,binder:this};n.bind(e,r,o,t)}else console.warn(`[Stitch.js ${t}] Unknown binding type: ${a}`)}if(d&&d.onChange){n.log("bindings",`  → Setting up onChange reactive effect for "${l}"`);const t={type:a,path:o,attributeName:`data-${a}`};let i=g;const c=this.reactiveSystem.effect(()=>{const n=s(r,o);d.onChange.call(this,e,n,i,t,l),i=n});this._trackCleanup(e,()=>this.reactiveSystem.cleanup(c))}}_getTemplateSource(e){const t=e.getAttribute("data-template");if(t){const e=document.getElementById(t);if(!e)throw new Error(`Template '${t}' not found. Ensure <template id="${t}"> exists.`);if("TEMPLATE"!==e.tagName)throw new Error(`Element '${t}' must be a <template> element, got <${e.tagName.toLowerCase()}>.`);const n=e.content.firstElementChild;if(!n)throw new Error(`Template '${t}' is empty. Add at least one child element inside <template>.`);return n.outerHTML}return e.innerHTML}unbind(e){if("string"==typeof e&&(e=document.querySelector(e)),e){this.boundElements.has(e)&&this.boundElements.delete(e);const t=this._elementCleanups.get(e);t&&(t.forEach(e=>{try{e()}catch(e){console.error(e)}}),this._elementCleanups.delete(e))}}_trackCleanup(e,t){this._disposed||(this._elementCleanups.has(e)||this._elementCleanups.set(e,new Set),this._elementCleanups.get(e).add(t))}dispose(){this._disposed||(this._disposed=!0,this._elementCleanups.forEach(e=>{e.forEach(e=>{try{e()}catch(e){console.warn(`[Stitch.js ${t}] dispose cleanup error:`,e)}})}),this._elementCleanups.clear(),this.boundElements.clear(),this.reactiveSystem=null,n.log("bindings","DataBinder disposed"))}}return c.registerBinding=function(e,n){if("string"!=typeof e)throw new Error(`[Stitch.js ${t}] registerBinding: name must be a string`);if(!n||"function"!=typeof n.bind)throw new Error(`[Stitch.js ${t}] registerBinding: handler must have a bind() method`);o[e]&&console.warn(`[Stitch.js ${t}] registerBinding: Overriding existing handler "${e}"`),o[e]=n},c}}},t["packages/browser/src/foreach-binding-orchestrator.js"]=function(e,t,n){"use strict";function r(e,t,n,r,s){s.validateBinding(t,n,"foreach",e);const i=r.binder._getTemplateSource(e),a=s.getRenderingDelegate(e,s.foreachRenderingDelegates),o=a.prepareConfig(e,i);e.innerHTML="";const c=r.reactiveSystem.effect(()=>{const i=s.getProperty(t,n);a.render(e,i,o,r.binder,t,n)},{batch:!0});return r.binder._trackCleanup(e,()=>r.reactiveSystem.cleanup(c)),c}e.exports={bindForeach:r,createForeachBindingHandler:function(e){return{bind:(t,n,s,i)=>r(t,n,s,i,e)}}}},t["packages/browser/src/foreach-rendering-delegates.js"]=function(e,t,n){"use strict";function r(e,t,n,r,s,i){const a=e.tagName.toLowerCase();t.forEach((t,o)=>{const c=i.createItemContext(t,o,s),l=i.createTemplateElement(n,a);r._bindElement(l,c,[]),e.appendChild(l)})}function s(e,t,n,r,s,i){const a=e.tagName.toLowerCase(),o=i.stitchDebug;if(o&&o.enabled&&t.length>0&&"object"==typeof t[0]&&null!==t[0]){const n=t[0];n.hasOwnProperty("id")||n.hasOwnProperty("key")||o.log("warnings",`Performance Warning: foreach items in <${a}> are objects but missing 'id' or 'key' property.`,{element:e,hint:"Add an 'id' or 'key' property to your items to enable smart DOM reconciliation."})}const c=i.reconcileRows(e,t,n,a);t.forEach((e,t)=>{const n=c[t],a=i.createItemContext(e,t,s);n._stitchItemContext?(n._stitchItemContext=a,n._stitchItemContext.$index=t):(r._bindElement(n,a,[]),n._stitchItemContext=a)})}e.exports={renderItemsStandard:r,renderItemsSmart:s,createRenderingDelegates:function(e){const t=e.stitchDebug||{enabled:!1,log:function(){}},n=e.getProperty,i=e.getValueValidator,a=e.doc||("undefined"!=typeof document?document:null),o=function(n,r,i,a,o){return s(n,r,i,a,o,{reconcileRows:e.reconcileRows,createItemContext:e.createItemContext,stitchDebug:t})},c={prepareConfig:(e,t)=>({templateSource:t,placeholderText:e.getAttribute("data-default-text"),placeholderValue:e.getAttribute("data-default-value")||"",hasPlaceholder:!!e.getAttribute("data-default-text")}),render(s,o,c,l,u,d){t.enabled&&Array.isArray(o)&&o.length>100&&t.log("warnings",`Performance Warning: <select> with ${o.length} items triggers full re-render on every update.`,{element:s,hint:"Consider using a virtualization library or custom component for large dropdowns."});const g=s.getAttribute("data-value"),p=g?n(u,g):s.value;if(s.innerHTML="",c.hasPlaceholder){if(!a)throw new Error("createRenderingDelegates requires a document instance for select placeholder rendering.");const e=a.createElement("option");e.value=c.placeholderValue,e.textContent=c.placeholderText,s.appendChild(e)}if(Array.isArray(o)&&function(t,n,s,i,a){r(t,n,s,i,a,e)}(s,o,c.templateSource,l,u),null!=p)if(g){const e=i(s).validate(s,p,u,g,"render");void 0!==e&&(s.value=e)}else c.hasPlaceholder&&(s.value=c.placeholderValue);else c.hasPlaceholder&&(s.value=c.placeholderValue)}},l={prepareConfig:(e,t)=>({templateSource:t}),render(e,t,n,r,s,i){Array.isArray(t)?o(e,t,n.templateSource,r,s):e.innerHTML=""}},u={prepareConfig:(e,t)=>({templateSource:t}),render(e,t,n,r,s,i){Array.isArray(t)?o(e,t,n.templateSource,r,s):e.innerHTML=""}},d={prepareConfig:(e,t)=>({templateSource:t}),render(e,t,n,r,s,i){Array.isArray(t)?o(e,t,n.templateSource,r,s):e.innerHTML=""}};return{SELECT_RENDERING_DELEGATE:c,LIST_RENDERING_DELEGATE:l,TABLE_RENDERING_DELEGATE:u,DEFAULT_RENDERING_DELEGATE:d,FOREACH_RENDERING_DELEGATES:{select:c,ul:l,ol:l,tbody:u,thead:u,tfoot:u,default:d}}},getRenderingDelegate:function(e,t){return t[e.tagName.toLowerCase()]||t.default}}},t["packages/core/index.js"]=function(e,t,n){"use strict";const{MessageBus:r}=n("packages/core/src/message-bus.js"),{BatchScheduler:s}=n("packages/core/src/batch-scheduler.js"),{ComputedRef:i}=n("packages/core/src/computed-ref.js"),{ReactiveSystem:a}=n("packages/core/src/reactive-system.js");e.exports={MessageBus:r,version:"2.1.0",CoreMessageBus:r,BatchScheduler:s,ComputedRef:i,ReactiveSystem:a}},t["packages/core/src/batch-scheduler.js"]=function(e,t,n){"use strict";const r={enabled:!1,categories:Object.create(null),log(){},group(){},groupEnd(){}};e.exports={BatchScheduler:class{constructor(e={}){this.version=e.version||"v2.1.0",this.debug=e.debug||r,this._pendingEffects=new Set,this.flushing=!1,this.flushScheduled=!1,this.flushDepth=0,this.MAX_FLUSH_DEPTH=100}queue(e){if("function"!=typeof e)throw new TypeError(`[Stitch.js ${this.version} BatchScheduler] queue() expects a function, got ${typeof e}`);this._pendingEffects.add(e),this.scheduleFlush()}scheduleFlush(){this.flushScheduled||this.flushing||(this.flushScheduled=!0,Promise.resolve().then(()=>this.flush()))}flush(){if(this.flushing)return;if(this.flushDepth>=this.MAX_FLUSH_DEPTH)return console.error(`[Stitch.js ${this.version} BatchScheduler] Maximum flush depth exceeded.\nPossible infinite loop detected. Queue cleared.`),this._pendingEffects.clear(),this.flushDepth=0,void(this.flushScheduled=!1);this.flushing=!0,this.flushScheduled=!1,this.flushDepth++,this.debug.group("effects",`Flushing BatchScheduler (${this._pendingEffects.size} effects, depth: ${this.flushDepth})`);const e=Array.from(this._pendingEffects);this._pendingEffects.clear(),e.forEach(e=>{try{e()}catch(e){console.error(`[Stitch.js ${this.version} BatchScheduler] Error in effect:`,e)}}),this.debug.groupEnd("effects"),this.flushing=!1,this._pendingEffects.size>0?(this.debug.log("effects",`New effects queued during flush (${this._pendingEffects.size}), scheduling next flush`),this.scheduleFlush()):this.flushDepth=0}hasQueued(){return this._pendingEffects.size>0}clear(){this._pendingEffects.clear(),this.flushScheduled=!1}}}},t["packages/core/src/computed-ref.js"]=function(e,t,n){"use strict";e.exports={ComputedRef:class{constructor(e,t,n,r=null){this.getter=e,this.reactiveSystem=t,this.context=n,this.explicitDeps=r,this.value=void 0,this.dirty=!0,this.dependents=new Set,this.deps=new Set,this.id=Math.random().toString(36).substr(2,9),this.isComputedRef=!0,this.reactiveSystem.debug.log("computed",`COMPUTED REF CREATED (id: ${this.id})`,{hasExplicitDeps:!!r,explicitDeps:r})}markDirty(){this.dirty||(this.reactiveSystem.debug.log("computed",`COMPUTED MARKED DIRTY (id: ${this.id})`),this.dirty=!0,this.dependents.forEach(e=>{e.isComputedRef?e.markDirty():e.options&&e.options.batch?this.reactiveSystem.batchScheduler.queue(e):e()}))}evaluate(){this.reactiveSystem.debug.log("computed",`COMPUTING VALUE (id: ${this.id})`),this.cleanup(),this.reactiveSystem.effectStack.push(this);try{if(this.explicitDeps&&this.context)for(const e of this.explicitDeps)this.context[e];return this.value=this.getter.call(this.context),this.dirty=!1,this.reactiveSystem.debug.log("computed",`COMPUTED VALUE (id: ${this.id})`,{value:this.value,deps:this.deps.size}),this.value}finally{this.reactiveSystem.effectStack.pop()}}get(){const e=this.reactiveSystem.currentEffect;return e&&(this.dependents.add(e),this.reactiveSystem.debug.log("computed",`COMPUTED TRACKED (id: ${this.id}) by effect ${e.id||"unknown"}`)),this.dirty?this.evaluate():(this.reactiveSystem.debug.log("computed",`COMPUTED CACHED (id: ${this.id})`,{value:this.value}),this.value)}cleanup(){this.deps.forEach(e=>{e.delete(this)}),this.deps.clear()}}}},t["packages/core/src/message-bus.js"]=function(e,t,n){"use strict";const r={enabled:!1,categories:Object.create(null),log(){},group(){},groupEnd(){}};e.exports={MessageBus:class{constructor(e={}){this.version=e.version||"v2.1.0",this.debug=e.debug||r,this.subscribers=new Map,this.queue=[],this.isFlushing=!1,this.middleware=[],this.flushDepth=0,this.MAX_FLUSH_DEPTH=100}subscribe(e,t){return this.subscribers.has(e)||this.subscribers.set(e,new Set),this.subscribers.get(e).add(t),this.debug.log("messageBus",`Subscribed to event: "${e}"`,{subscriberCount:this.subscribers.get(e).size}),()=>this.unsubscribe(e,t)}unsubscribe(e,t){const n=this.subscribers.get(e);n&&n.delete(t)}publish(e,t){this.queue.push({event:e,payload:t,timestamp:Date.now()}),this.debug.log("messageBus",`Published event: "${e}" (queued)`,{payload:t,queueLength:this.queue.length}),this.isFlushing||Promise.resolve().then(()=>this.flush())}publishSync(e,t){this._executeEvent({event:e,payload:t,timestamp:Date.now()})}flush(){if(this.isFlushing||0===this.queue.length)return;if(this.flushDepth>=this.MAX_FLUSH_DEPTH)return console.error(`[Stitch.js ${this.version} MessageBus] Maximum flush depth (${this.MAX_FLUSH_DEPTH}) exceeded.\nPossible infinite loop detected. Event queue has been cleared.`),this.flushDepth=0,void(this.queue=[]);this.isFlushing=!0,this.flushDepth++;const e=[...this.queue];this.queue=[],this.debug.group("messageBus",`Flushing Message Bus (${e.length} events, depth: ${this.flushDepth})`),e.forEach(e=>{this._executeEvent(e)}),this.debug.groupEnd("messageBus"),this.isFlushing=!1,this.queue.length>0?(this.debug.log("messageBus",`New events queued during flush (${this.queue.length}), scheduling next flush (depth: ${this.flushDepth})`),this.flushDepth>5&&console.warn(`[Stitch.js ${this.version} MessageBus] Flush depth > 5. Queued events:`,this.queue.map(e=>e.event).join(", ")),Promise.resolve().then(()=>this.flush())):this.flushDepth=0}_executeEvent(e){let t=e;for(const e of this.middleware)t=e(t)||t;const n=t.event,r=t.payload,s=this.subscribers.get(n);this.debug.log("messageBus",`Executing event: "${n}"`,{payload:r,subscriberCount:s?s.size:0}),s&&s.forEach(e=>{try{e(r)}catch(e){console.error(`[Stitch.js ${this.version} MessageBus] Error in subscriber for event "${n}":`,e)}});const i=this.subscribers.get("*");i&&i.forEach(e=>{try{e({event:n,payload:r})}catch(e){console.error(`[Stitch.js ${this.version} MessageBus] Error in wildcard subscriber:`,e)}})}use(e){this.middleware.push(e)}clear(){this.queue=[]}},NOOP_DEBUG:r}},t["packages/core/src/reactive-system.js"]=function(e,t,n){"use strict";const{MessageBus:r,NOOP_DEBUG:s}=n("packages/core/src/message-bus.js"),{BatchScheduler:i}=n("packages/core/src/batch-scheduler.js");e.exports={ReactiveSystem:class{constructor(e=null,t={}){this.version=t.version||"v2.1.0",this.debug=t.debug||s,this.effects=new Set,this.effectStack=[],this.depsMap=new WeakMap;const n=t.BatchScheduler||i,a=t.MessageBus||r;this.batchScheduler=new n({version:this.version,debug:this.debug}),this.messageBus=new a({version:this.version,debug:this.debug}),this.bubbleChangeUp=e,this.messageBus.subscribe("nested-change",e=>{const t=e.parent,n=e.fullPath,r=e.oldValue,s=e.newValue;t._changeHandlers&&t._changeHandlers.size>0&&t._changeHandlers.forEach(e=>{e({field:n,oldValue:r,newValue:s,target:t,nestedChange:!0})})}),this.messageBus.subscribe("array-mutation",e=>{const t=e.target,n=e.method,r=e.args,s=e.oldLength,i=e.newLength;t._changeHandlers&&t._changeHandlers.forEach(e=>{e({field:"items",action:n,args:r,target:t})}),this.bubbleChangeUp&&this.bubbleChangeUp(t,"items",s,i)})}get currentEffect(){return this.effectStack[this.effectStack.length-1]||null}_getObjectId(e){return e?e.__stitchId||e.constructor?.name||"unknown":"null"}track(e,t){const n=this.currentEffect;if(!n)return void this.debug.log("reactivity",`TRACK SKIPPED (no current effect): ${this._getObjectId(e)}.${String(t)}`);let r=this.depsMap.get(e);r||(r=new Map,this.depsMap.set(e,r));let s=r.get(t);s||(s=new Set,r.set(t,s)),s.add(n),n.deps&&n.deps.add(s),this.debug.log("reactivity",`TRACK: ${this._getObjectId(e)}.${String(t)} -> ${n.id||"unknown"}`,{effectId:n.id,isComputed:!!n.isComputedRef,dependencyCount:s.size})}trigger(e,t,n,r){const s=this.depsMap.get(e),i=s?.get(t);i&&0!==i.size?(this.debug.log("reactivity",`TRIGGER: ${this._getObjectId(e)}.${String(t)} (${i.size} dependents)`,{oldValue:n,newValue:r}),new Set(i).forEach(e=>{e.isComputedRef?e.markDirty():e.options&&e.options.batch?this.batchScheduler.queue(e):e()}),e._changeHandlers&&e._changeHandlers.forEach(s=>{s({field:t,oldValue:n,newValue:r,target:e})})):this.debug.log("reactivity",`TRIGGER SKIPPED (no deps): ${this._getObjectId(e)}.${String(t)}`)}effect(e,t={}){const n=Math.random().toString(36).substr(2,9),r=()=>{this.cleanup(r),this.effectStack.push(r),this.debug.log("effects",`EFFECT RUNNING (id: ${n})`,{stackDepth:this.effectStack.length,batch:!!t.batch});try{return e()}finally{this.effectStack.pop()}};return r.deps=new Set,r.options=t,r.id=n,this.debug.log("effects",`EFFECT CREATED (id: ${n})`,{lazy:!!t.lazy,batch:!!t.batch}),t.lazy||r(),r}cleanup(e){e.deps.forEach(t=>{t.delete(e)}),e.deps.clear()}}}},t["packages/utils/index.js"]=function(e,t,n){"use strict";const r="2.1.0",s=n("packages/utils/src/runtime-helpers.js"),i=n("packages/utils/src/debug-config.js"),a=n("packages/utils/src/attr-value-handlers.js"),o=n("packages/utils/src/value-binding-helpers.js"),c=n("packages/utils/src/type-converters.js"),l=n("packages/utils/src/foreach-template-helpers.js"),u=n("packages/utils/src/foreach-reconcile-helpers.js"),d=n("packages/utils/src/reactive-object-helpers.js"),g=i.createDebugState(`v${r}`),p={enable(){g.enabled=!0,console.log("[Stitch.js Debug] Enabled")},disable(){g.enabled=!1,console.log("[Stitch.js Debug] Disabled")},enableCategory(e){i.isKnownDebugCategory(g.categories,e)?(g.categories[e]=!0,console.log(`[Stitch.js Debug] Enabled category: ${e}`)):console.warn(i.formatUnknownCategoryWarning(e,g.categories))},disableCategory(e){i.isKnownDebugCategory(g.categories,e)?(g.categories[e]=!1,console.log(`[Stitch.js Debug] Disabled category: ${e}`)):console.warn(i.formatUnknownCategoryWarning(e,g.categories))},categories(){console.log("[Stitch.js Debug] Available categories:"),console.table(g.categories)}};e.exports={debug:p,version:r,...s,...i,...a,...o,...c,...l,...u,...d}},t["packages/utils/src/attr-value-handlers.js"]=function(e,t,n){"use strict";const r={null:{apply(e,t,n){e.removeAttribute(t)}},undefined:{apply(e,t,n){e.removeAttribute(t)}},boolean:{apply(e,t,n){!0===n?e.setAttribute(t,""):e.removeAttribute(t)}},object:{apply(e,t,n){if("style"===t&&"object"==typeof n){const r=Object.keys(n).map(e=>`${e.replace(/([A-Z])/g,"-$1").toLowerCase()}: ${n[e]}`).join("; ");e.setAttribute(t,r)}else e.setAttribute(t,JSON.stringify(n))}},array:{apply(e,t,n){"class"===t?e.setAttribute(t,n.join(" ")):e.setAttribute(t,n.join(","))}},default:{apply(e,t,n){e.setAttribute(t,String(n))}}};e.exports={ATTR_VALUE_HANDLERS:r,getAttrHandler:function(e){return null===e?r.null:void 0===e?r.undefined:"boolean"==typeof e?r.boolean:Array.isArray(e)?r.array:"object"==typeof e?r.object:r.default}}},t["packages/utils/src/debug-config.js"]=function(e,t,n){"use strict";const r=Object.freeze({reactivity:!0,computed:!0,effects:!0,bindings:!0,messageBus:!0,warnings:!0}),s=Object.freeze({reactivity:"#2196F3",computed:"#4CAF50",effects:"#FF9800",bindings:"#9C27B0",messageBus:"#F44336",warnings:"#FF5722"});function i(e=r){return Object.keys(e)}e.exports={DEFAULT_DEBUG_CATEGORIES:r,DEFAULT_DEBUG_COLORS:s,createDebugState:function(e){return{version:e,enabled:!1,categories:{...r},colors:{...s}}},listDebugCategories:i,isKnownDebugCategory:function(e,t){return!!e&&Object.prototype.hasOwnProperty.call(e,t)},formatUnknownCategoryWarning:function(e,t=r){return`[Stitch.js Debug] Unknown category: ${e}. Valid categories: ${i(t).join(", ")}`}}},t["packages/utils/src/foreach-reconcile-helpers.js"]=function(e,t,n){"use strict";const{createTemplateElement:r}=n("packages/utils/src/foreach-template-helpers.js");function s(e,t){if("object"==typeof e&&null!==e){if(void 0!==e.id)return`item-${e.id}`;if(void 0!==e.key)return`item-${e.key}`}return`item-${t}`}e.exports={createItemContext:function(e,t,n){let r;return"object"==typeof e&&null!==e?(r=Object.create(e),Object.defineProperty(r,"$data",{value:e,writable:!0,enumerable:!1})):(r=Object.create(null),r.$data=e),r.$index=t,r.$parent=n,r},getItemKey:s,reconcileRows:function(e,t,n,i,a={}){const o=a.createTemplateElement||r,c=Array.from(e.children),l=[],u=new Map;return c.forEach((e,t)=>{const n=e.dataset.stitchKey||`item-${t}`;u.set(n,e)}),t.forEach((e,t)=>{const r=s(e,t);if(u.has(r)){const e=u.get(r);l.push(e),u.delete(r)}else{const e=o(n,i);e.dataset.stitchKey=r,l.push(e)}}),u.forEach(e=>{e.remove()}),l.forEach((t,n)=>{e.children[n]!==t&&e.insertBefore(t,e.children[n]||null)}),l}}},t["packages/utils/src/foreach-template-helpers.js"]=function(e,t,n){"use strict";const r={tbody:{wrapperTag:"table",innerTag:"tbody",needsWrapper:!0},thead:{wrapperTag:"table",innerTag:"thead",needsWrapper:!0},tfoot:{wrapperTag:"table",innerTag:"tfoot",needsWrapper:!0},ul:{containerTag:"ul",needsWrapper:!1},ol:{containerTag:"ol",needsWrapper:!1},select:{containerTag:"select",needsWrapper:!1},default:{containerTag:"div",needsWrapper:!1}};function s(e,t,n=("undefined"!=typeof document?document:null)){if(!n)throw new Error("createTempContainer requires a document instance.");if(t.needsWrapper){const r=n.createElement(t.wrapperTag),s=n.createElement(t.innerTag);return s.innerHTML=e,r.appendChild(s),{container:r,inner:s}}const r=n.createElement(t.containerTag);return r.innerHTML=e,{container:r,inner:null}}function i(e){const t=e.inner||e.container;return Array.from(t.children)}e.exports={FOREACH_CONTAINER_HANDLERS:r,createTempContainer:s,extractElements:i,createTemplateElement:function(e,t,n={}){const a=n.handlers||r;return i(s(e,a[t]||a.default,n.doc))[0]}}},t["packages/utils/src/reactive-object-helpers.js"]=function(e,t,n){"use strict";e.exports={addChangeHandler:function(e){this._changeHandlers.add(e)},removeChangeHandler:function(e){e?this._changeHandlers.delete(e):this._changeHandlers.clear()},toJSON:function(){const e={};for(const[t,n]of Object.entries(this))t.startsWith("_")||(n&&"object"==typeof n&&n.toJSON?e[t]=n.toJSON():Array.isArray(n)?e[t]=n.map(e=>e&&"object"==typeof e&&e.toJSON?e.toJSON():e):e[t]=n);return e}}},t["packages/utils/src/runtime-helpers.js"]=function(e,t,n){"use strict";e.exports={isArrowFunction:function(e){if("function"!=typeof e)return!1;if(void 0!==e.prototype)return!1;const t=e.toString();return!t.includes("[native code]")&&(!e.name||!e.name.startsWith("bound "))&&/^\s*(\([^)]*\)|[a-zA-Z_$][\w$]*)\s*=>/.test(t)},setProperty:function(e,t,n){const r=t.split(".");let s=e;for(let e=0;e<r.length-1;e++)s[r[e]]&&"object"==typeof s[r[e]]||(s[r[e]]={}),s=s[r[e]];s[r[r.length-1]]=n},getProperty:function(e,t,n={}){const r=n.version||"2.1.0",s=!!n.debugEnabled;if(t.trim().startsWith("{"))return void console.error(`[Stitch.js ${r}] Invalid binding syntax: "${t}"\n\nInline object literals are not supported in bindings.\nUse a property path reference instead.`);const i=t.split(".");let a=e;for(let e=0;e<i.length;e++){const n=i[e];if(null==a){if(s){const n=i.slice(0,e).join(".");console.warn(`[Stitch.js ${r}] Property path "${t}" is null/undefined at "${n}"`)}return}if(!(n in a)){if(s){const s=i.slice(0,e).join(".");console.warn(`[Stitch.js ${r}] Property "${n}" does not exist on object at path "${s}". Full path: "${t}"`)}return}a=a[n]}return a},propertyExists:function(e,t){if(!e||!t)return!1;const n=t.split(".");let r=e;for(const e of n){if(null==r||!(e in r))return!1;r=r[e]}return!0},findSimilarProperty:function(e,t){if(!e||!t)return null;const n=t.split(".").pop(),r=Object.keys(e).filter(e=>!e.startsWith("_")).find(e=>{const t=e.toLowerCase(),r=n.toLowerCase();return(t.includes(r)||r.includes(t))&&t!==r});return r?`Did you mean "${r}"?`:null}}},t["packages/utils/src/type-converters.js"]=function(e,t,n){"use strict";const r="2.1.0";function s(e={}){const t=e.version||r;return{int:{canHandle:(e,t)=>"int"===t?.getAttribute("data-type")||"number"===t?.type&&null!==e&&Number.isInteger(e),toModel(e){if(""===e||null==e)return null;const n=parseInt(e,10);return isNaN(n)?(console.warn(`[Stitch.js ${t}] Failed to convert "${e}" to int. Returning null.`),null):n},toDom:e=>null==e?"":String(e),equals(e,t){return this.toModel(e)===this.toModel(t)}},float:{canHandle:(e,t)=>"float"===t?.getAttribute("data-type")||"number"===t?.type&&null!==e&&!Number.isInteger(e),toModel(e){if(""===e||null==e)return null;const n=parseFloat(e);return isNaN(n)?(console.warn(`[Stitch.js ${t}] Failed to convert "${e}" to float. Returning null.`),null):n},toDom:e=>null==e?"":String(e),equals(e,t){const n=this.toModel(e),r=this.toModel(t);return null===n||null===r?n===r:Math.abs(n-r)<Number.EPSILON}},boolean:{canHandle:(e,t)=>"bool"===t?.getAttribute("data-type")||"boolean"===t?.getAttribute("data-type")||"checkbox"===t?.type,toModel(e){if("boolean"==typeof e)return e;if("string"==typeof e){const t=e.toLowerCase().trim();if("true"===t||"1"===t||"yes"===t)return!0;if("false"===t||"0"===t||"no"===t||""===t)return!1}return Boolean(e)},toDom:e=>e?"true":"false",equals(e,t){return this.toModel(e)===this.toModel(t)}},string:{canHandle:(e,t)=>"string"===t?.getAttribute("data-type")||"text"===t?.type||"email"===t?.type||"url"===t?.type||"tel"===t?.type||"password"===t?.type||"TEXTAREA"===t?.tagName,toModel:e=>null==e?"":String(e),toDom:e=>null==e?"":String(e),equals:(e,t)=>String(e)===String(t)},date:{canHandle:(e,t)=>"date"===t?.getAttribute("data-type")||"date"===t?.type,toModel(e){if(!e)return null;if(e instanceof Date)return e;const n=new Date(e);return isNaN(n.getTime())?(console.warn(`[Stitch.js ${t}] Failed to convert "${e}" to date. Returning null.`),null):n},toDom(e){if(!e)return"";const t=e instanceof Date?e:new Date(e);return isNaN(t.getTime())?"":t.toISOString().split("T")[0]},equals(e,t){const n=this.toModel(e),r=this.toModel(t);return null===n||null===r?n===r:n.getTime()===r.getTime()}},datetime:{canHandle:(e,t)=>"datetime"===t?.getAttribute("data-type")||"datetime-local"===t?.type,toModel(e){if(!e)return null;if(e instanceof Date)return e;const n=new Date(e);return isNaN(n.getTime())?(console.warn(`[Stitch.js ${t}] Failed to convert "${e}" to datetime. Returning null.`),null):n},toDom(e){if(!e)return"";const t=e instanceof Date?e:new Date(e);return isNaN(t.getTime())?"":`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}T${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}`},equals(e,t){const n=this.toModel(e),r=this.toModel(t);return null===n||null===r?n===r:n.getTime()===r.getTime()}},auto:{canHandle:(e,t)=>!0,toModel:e=>e,toDom:e=>null==e?"":String(e),equals:(e,t)=>e==t}}}const i=s();e.exports={DEFAULT_VERSION:r,createTypeConverters:s,TYPE_CONVERTERS:i,getTypeConverter:function(e,t,n=i){const r=e?.getAttribute("data-type");if(r&&n[r])return n[r];if(e)for(const[r,s]of Object.entries(n))if("auto"!==r&&s.canHandle(t,e))return s;if(null!=t){const e=typeof t;if("number"===e)return Number.isInteger(t)?n.int:n.float;if("boolean"===e)return n.boolean;if(t instanceof Date)return n.date}return n.auto}}},t["packages/utils/src/value-binding-helpers.js"]=function(e,t,n){"use strict";e.exports={createValueValidators:function(e){const t=e.getTypeConverter,n=e.setProperty,r=e.doc||("undefined"!=typeof document?document:null);return{"select-single":{validate(e,r,s=null,i=null,a="render"){const o=e.hasAttribute("data-default-text"),c=e.hasAttribute("data-default-value")?e.getAttribute("data-default-value"):"";if(o&&r===c)return c;if(!r||""===r)return o?c:"";const l=t(e,r);if(!Array.from(e.options).some(e=>l.equals(e.value,r))){if(o)return e.value=c,"user-input"===a&&s&&i&&n(s,i,c),c;e.selectedIndex=0;const t=e.options[0]?.value||"";return"user-input"===a&&s&&i&&n(s,i,t),t}return r}},"select-multiple":{validate(e,r,s=null,i=null,a="render"){if(!Array.isArray(r)||0===r.length)return[];const o=t(e,r[0]),c=Array.from(e.options).map(e=>e.value),l=r.filter(e=>c.some(t=>o.equals(t,e)));return Array.from(e.options).forEach(e=>{e.selected=l.some(t=>o.equals(e.value,t))}),"user-input"===a&&s&&i&&l.length!==r.length&&n(s,i,l),l}},"radio-group":{validate(e,s,i=null,a=null,o="render"){const c=e.name;if(!c)return s;if(!r)return s;const l=t(e,s),u=r.querySelectorAll(`input[type="radio"][name="${c}"]`);return Array.from(u).some(e=>l.equals(e.value,s))||""===s?s:(u.forEach(e=>{e.checked=!1}),"user-input"===o&&i&&a&&n(i,a,""),"")}},default:{validate:(e,t,n=null,r=null)=>t}}},getValueValidator:function(e,t){return"SELECT"===e.tagName&&e.multiple?t["select-multiple"]:"SELECT"===e.tagName?t["select-single"]:"radio"===e.type?t["radio-group"]:t.default},createValueHandlers:function(e){const t=e.getTypeConverter,n=e.resolveValueValidator;return{checkbox:{modelToView(e,t,n=null,r=null){e.checked=!!t},viewToModel:e=>e.checked},radio:{modelToView(e,n,r=null,s=null){const i=t(e,n);e.checked=i.equals(e.value,n)},viewToModel:e=>t(e,e.value).toModel(e.value)},"select-multiple":{modelToView(e,t,r=null,s=null){const i=Array.isArray(t)?t:[];n(e).validate(e,i,r,s,"render")},viewToModel(e){const n=t(e,e.value);return Array.from(e.selectedOptions).map(e=>n.toModel(e.value))}},number:{modelToView(e,n,r=null,s=null){const i=t(e,n);e.value=i.toDom(n)},viewToModel:e=>t(e,e.value).toModel(e.value)},range:{modelToView(e,t,n=null,r=null){e.value=null!=t?t:""},viewToModel:e=>parseFloat(e.value)||0},default:{modelToView(e,r,s=null,i=null){const a=t(e,r).toDom(r);if("SELECT"===e.tagName){const t=n(e).validate(e,a,s,i,"render");e.value!==t&&(e.value=t)}else e.value!==a&&(e.value=a)},viewToModel:e=>t(e,e.value).toModel(e.value)}}},getValueHandler:function(e,t){return"checkbox"===e.type?t.checkbox:"radio"===e.type?t.radio:"SELECT"===e.tagName&&e.multiple?t["select-multiple"]:"number"===e.type?t.number:"range"===e.type?t.range:t.default}}};var n=Object.create(null);function r(e){var s=function(e){if(!e)return e;var t=String(e).replace(/\\/g,"/");return 0===t.indexOf("./")&&(t=t.slice(2)),t}(e),i=t[s];if(!i)throw new Error("Stitch assembly missing inline module: "+s);if(n[s])return n[s].exports;var a={exports:{}};return n[s]=a,i(a,a.exports,r),a.exports}"function"!=typeof e.__stitchInlineRequire&&(e.__stitchInlineRequire=function(e){try{return r(e)}catch(e){return null}})}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:this),function(){"use strict";const e="function"==typeof __stitchInlineRequire&&__stitchInlineRequire("./packages/api/index.js")||require("./packages/api/index.js"),t="function"==typeof __stitchInlineRequire&&__stitchInlineRequire("./packages/browser/index.js")||require("./packages/browser/index.js"),n="function"==typeof __stitchInlineRequire&&__stitchInlineRequire("./packages/core/index.js")||require("./packages/core/index.js"),r="function"==typeof __stitchInlineRequire&&__stitchInlineRequire("./packages/utils/index.js")||require("./packages/utils/index.js");if(!(e&&t&&n&&r))throw new Error("Stitch.js bootstrap failed: one or more package modules could not be resolved.");const s=e.Observable,i=e.computed||s&&s.computed,a={Observable:s,DataBinder:t.DataBinder,MessageBus:n.MessageBus,computed:i,version:e.version||n.version||t.version||r.version||"2.1.0",debug:r.debug||{enable(){},disable(){},enableCategory(){},disableCategory(){},categories(){}}};"undefined"!=typeof window?window.Stitch=a:"undefined"!=typeof module&&module.exports&&(module.exports=a)}();